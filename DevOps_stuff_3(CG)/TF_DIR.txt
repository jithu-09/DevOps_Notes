TF DIR

ğŸ“ Terraform Directory Structure (with Multiple Workspaces)

terraform-project/
â”‚
â”œâ”€â”€ main.tf                  # Main configuration file (resources, modules, etc.)
â”œâ”€â”€ variables.tf             # Input variable definitions
â”œâ”€â”€ outputs.tf               # Output values
â”œâ”€â”€ terraform.tfvars         # Actual values for variables
â”œâ”€â”€ provider.tf              # Provider configuration (e.g., AWS, Azure)
â”œâ”€â”€ versions.tf              # Required Terraform and provider versions
â”œâ”€â”€ backend.tf               # Remote backend configuration (optional)
â”‚
â”œâ”€â”€ .terraform/              # Auto-generated plugin/module cache
â”‚   â”œâ”€â”€ providers/           # Downloaded provider binaries
â”‚   â””â”€â”€ modules/             # Cached modules
â”‚
â”œâ”€â”€ .terraform.lock.hcl      # Provider dependency lock file(exact versions, provider checksums, provider information)
â”‚                             # Manage external provider dependencies within the terraform configuration, 
â”‚                               ensures consistent provider versions across all environments and terraform operations 
â”‚
â”œâ”€â”€ terraform.tfstate        # Default workspace state file (if using local backend)
â”œâ”€â”€ terraform.tfstate.backup # Backup of previous state
â”‚
â”œâ”€â”€ terraform.tfstate.d/     # Workspace-specific state files (for CLI workspaces)
â”‚   â”œâ”€â”€ dev/
â”‚   â”‚   â””â”€â”€ terraform.tfstate
â”‚   â”œâ”€â”€ staging/
â”‚   â”‚   â””â”€â”€ terraform.tfstate
â”‚   â””â”€â”€ prod/
â”‚       â””â”€â”€ terraform.tfstate
â”‚
â”œâ”€â”€ modules/                 # Reusable custom modules
â”‚   â””â”€â”€ <module-name>/       # Each module has its own *.tf files
â”‚
â”œâ”€â”€ environments/            # Optional: separate folders for environment-specific configs
â”‚   â”œâ”€â”€ dev/
â”‚   â”œâ”€â”€ staging/
â”‚   â””â”€â”€ prod/
â”‚
â””â”€â”€ README.md                # Project documentation

Alias for provider:

terraform {
  required_providers {
    aws_p = {
      source  = "hashicorp/aws"
      version = "~> 3.0"
    }
  }
}

provider "aws_p" {
  alias  = "custom"
  region = "us-west-2"
}

resource "aws_instance" "example" { #the resource type name like aws_instance does not change, even if you use an alias for the provider
  provider      = aws_p.custom
  ami           = "ami-0123456789abcdef0"
  instance_type = "t2.micro"
}

#Terraform resource types are always prefixed with the official provider name, not your alias.

